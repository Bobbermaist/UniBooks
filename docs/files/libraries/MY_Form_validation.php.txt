<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * UniBooks
 *
 * An application for books trade off
 *
 * @package UniBooks
 * @author Emiliano Bovetti
 * @since Version 1.0
 */

/**
 * UniBooks MY_Form_validation class.
 *
 * Extends the CI validation rules.
 *
 * @package UniBooks
 * @category Validation
 * @author Emiliano Bovetti
 */
class MY_Form_validation extends CI_Form_validation {

	/**
	 * CodeIgniter istance
	 *
	 * @var object
	 * @access protected
	 */
	protected $CI;

	/**
	 * Constructor
	 *
	 * Get the CodeIgniter istance
	 *
	 * @return void
	 */
  public function __construct($rules = array())
  {
  	parent::__construct($rules);
  	$this->CI =& get_instance();
  }

	/**
	 * Validate an email address.
	 *
	 * @param string
	 * @return boolean
	 */
  public function valid_email($str)
  {
  	return filter_var($str, FILTER_VALIDATE_EMAIL);
  }

	/**
	 * Validate a price.
	 *
	 * @param string
	 * @return boolean
	 */
	public function valid_price($str)
	{
		return ( ! preg_match('/^([0-9]+)([\.|,][0-9]{1,2})?$/', $str)) ? FALSE : TRUE;
	}
	
	/**
	 * Validate an ISBN code.
	 *
	 * @param string
	 * @return boolean
	 */
	public function valid_ISBN($str)
	{
		$this->load->helper('isbn');
		$this->CI->load->model('Book_model');

		return validate_isbn_13($str) OR
						validate_isbn_10($str) OR
						validate_isbn_13('978' . $str);
	}
}

// END MY_Form_validation class

/* End of file MY_Form_validation.php */
/* Location: ./application/libraries/MY_Form_validation.php */
